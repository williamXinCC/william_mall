<view class="cart"><view class="header" style="{{'position:'+(headerPosition)+';'+('top:'+(headerTop)+';')}}"><view class="title">购物车</view></view><view class="place"></view><block wx:if="{{cartList.length===0}}"><view class="empty"><text class="iconfont icongouwuche"></text><block wx:if="{{hasLogin}}"><view class="empty-tips">空空如也<block wx:if="{{hasLogin}}"><navigator class="navigator" url="../category/category" open-type="switchTab">随便逛逛></navigator></block></view></block><block wx:else><view class="empty-tips">空空如也<view data-event-opts="{{[['tap',[['navTo',['/pages/public/logintype']]]]]}}" class="navigator" bindtap="__e">去登陆></view></view></block></view></block><block wx:else><view class="goods-list"><view data-event-opts="{{[['tap',[['clearCart',[['o',['lose_status',1]]]]]]]}}" class="btn-clear" bindtap="__e">清空失效商品</view><block wx:for="{{$root.l0}}" wx:for-item="row" wx:for-index="index" wx:key="index"><view class="row"><view data-event-opts="{{[['tap',[['deleteCartItem',['$0','one'],[[['cartList','',index,'sku_id']]]]]]]}}" class="menu" catchtap="__e"><view class="iconfont icon iconiconfontshanchu1 _i"></view></view><view data-event-opts="{{[['touchstart',[['touchStart',[index,'$event']]]],['touchmove',[['touchMove',[index,'$event']]]],['touchend',[['touchEnd',[index,'$event']]]]]}}" class="{{['carrier',theIndex==index?'open':oldIndex==index?'close':'']}}" bindtouchstart="__e" bindtouchmove="__e" bindtouchend="__e"><view data-event-opts="{{[['tap',[['selected',[index,'$0'],[[['cartList','',index]]]]]]]}}" class="checkbox-box" bindtap="__e"><view class="{{['checkbox',row.m0===0?'checkbox-disabled':'']}}"><view class="{{[row.$orig.selected?'on':'']}}"></view></view></view><view class="goods-info"><view class="img"><image src="{{row.$orig.product_img}}"></image></view><view class="info"><view data-event-opts="{{[['tap',[['navTo',['/pages/product/product?id='+row.$orig.product.id]]]]]}}" class="title in2line" bindtap="__e">{{row.$orig.product_name}}</view><view class="state-wrapper"><view data-event-opts="{{[['tap',[['toggleSpec',['$0'],[[['cartList','',index]]]]]]]}}" class="spec" catchtap="__e">{{row.$orig.sku_name||'基础版'}}</view><block wx:if="{{row.m1===0}}"><view class="state">已失效</view></block></view><view class="price-number"><block wx:if="{{row.m2===1}}"><view class="price">{{row.$orig.sku&&row.$orig.sku.price}}</view></block><block wx:else><view class="remark">{{row.$orig.remark}}</view></block><block wx:if="{{row.m3===1}}"><view class="number"><view data-event-opts="{{[['tap',[['sub',['$0',index],[[['cartList','',index]]]]]]]}}" class="sub" catchtap="__e"><text class="iconfont icon icon-jianhao"></text></view><view data-event-opts="{{[['tap',[['discard',['$event']]]]]}}" class="input" catchtap="__e"><input type="number" data-event-opts="{{[['input',[['__set_model',['$0','number','$event',[]],[[['cartList','',index]]]],['numberChange',['$0','$event',index],[[['cartList','',index]]]]]]]}}" value="{{row.$orig.number}}" catchinput="__e"/></view><view data-event-opts="{{[['tap',[['add',['$0',index],[[['cartList','',index]]]]]]]}}" class="add" catchtap="__e"><text class="iconfont icon iconjia1"></text></view></view></block></view></view></view></view></view></block></view></block><block wx:if="{{cartList.length!==0}}"><view class="footer" style="{{'bottom:'+(footerbottom)+';'}}"><view data-event-opts="{{[['tap',[['allSelect',['$event']]]]]}}" class="checkbox-box" bindtap="__e"><view class="checkbox"><view class="{{[isAllselected?'on':'']}}"></view></view><view class="text">全选</view></view><block wx:if="{{selectedList.length>0}}"><view data-event-opts="{{[['tap',[['deleteCartItem',['$event']]]]]}}" class="delBtn del" bindtap="__e">删除</view></block><block wx:if="{{selectedList.length>0}}"><view data-event-opts="{{[['tap',[['clearCart']]]]}}" class="delBtn" bindtap="__e">清空</view></block><view class="settlement"><view class="sum">合计:<view class="money">{{"￥"+sumPrice}}</view></view><view data-event-opts="{{[['tap',[['createOrder',['$event']]]]]}}" class="btn" bindtap="__e">{{"结算("+selectedList.length+")"}}</view></view></view></block><view data-event-opts="{{[['touchmove',[['stopPrevent',['$event']]]],['tap',[['hideSpec',['$event']]]]]}}" class="{{['popup spec',specClass]}}" catchtouchmove="__e" bindtap="__e"><view data-event-opts="{{[['tap',[['hideSpec',['$event']]]]]}}" class="mask" bindtap="__e"></view><view data-event-opts="{{[['tap',[['stopPrevent',['$event']]]]]}}" class="layer attr-content" catchtap="__e"><view class="a-t"><image src="{{showTypeImage||productDetail.picture}}"></image><view class="right"><text class="title">{{productDetail.name}}</text><text class="price">{{"¥"+(currentSkuPrice||productDetail.minSkuPrice)}}</text><text class="stock">{{"库存："+(currentStock||productDetail.stock)+"件"}}</text><block wx:if="{{specSelected.length>0}}"><view class="selected">已选：<block wx:for="{{specSelected}}" wx:for-item="sItem" wx:for-index="sIndex" wx:key="sIndex"><text class="selected-text">{{''+sItem.title+''}}</text></block><block wx:if="{{specSelected.length>0}}"><text>{{'* '+cartCount+''}}</text></block></view></block></view></view><block wx:for="{{$root.l1}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view class="attr-list"><text>{{item.$orig.title}}</text><view class="item-list"><block wx:for="{{specChildList}}" wx:for-item="childItem" wx:for-index="childIndex" wx:key="childIndex"><block wx:if="{{childItem.base_spec_id===item.$orig.base_spec_id}}"><view data-event-opts="{{[['tap',[['selectSpec',[childIndex,'$0','$1'],[[['specChildList','',childIndex,'base_spec_id']],[['specList','',index,'show_type']]]]]]]}}" class="{{['tit',(childItem.selected)?'selected':'']}}" style="{{(childItem.selected&&item.m4===2?styleObject:'')}}" bindtap="__e"><block wx:if="{{item.m5===1}}"><text>{{''+childItem.title+''}}</text></block><block wx:if="{{item.m6===2}}"><text>{{''+childItem.title+''}}</text></block><block wx:if="{{item.m7===3}}"><view><image class="img" src="{{childItem.data||productDetail.picture}}" mode="aspectFill"></image>{{''+childItem.title+''}}</view></block></view></block></block></view></view></block><button data-event-opts="{{[['tap',[['toggleSpec',['$event']]]]]}}" class="btn" bindtap="__e">完成</button></view></view><block wx:if="{{loading}}"><rf-loading vue-id="1775f8c0-1" bind:__l="__l"></rf-loading></block></view>